[Unit]
Description=Kanata keyboard remapper
Documentation=https://github.com/jtroo/kanata

[Service]
Environment=PATH=/usr/local/bin:/usr/local/sbin:/usr/bin:/bin:%h/.cargo/bin
Environment=DISPLAY=:0
Type=simple
ExecStartPre=/usr/bin/modprobe uinput
{{ if eq .chezmoi.osRelease.id "arch" -}}
ExecStart=/usr/bin/kanata --cfg %h/.config/kanata/kanata.kbd
{{ else -}}
ExecStart=%h/.cargo/bin/kanata --cfg %h/.config/kanata/kanata.kbd
{{ end -}}
Restart=on-failure

[Install]
WantedBy=default.target
